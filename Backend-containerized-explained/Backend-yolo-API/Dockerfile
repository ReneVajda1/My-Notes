#......................................................
#....Step 1: (BUILDER STAGE) Builds the application....
#......................................................
FROM gradle:jdk21-alpine AS builder
WORKDIR /app
COPY . .
RUN gradle bootJar

# Debugging: List contents of the build/libs directory
RUN ls -la /app/build/libs

#......................................................
#....Step 2: (RUNTIME STAGE) Create a runtime image....
#......................................................
FROM amazoncorretto:21
WORKDIR /app
COPY --from=builder /app/build/libs/*.jar app.jar
ENTRYPOINT ["java", "-jar", "app.jar"]
